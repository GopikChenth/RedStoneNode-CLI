global
    log stdout format raw local0
    maxconn 2048
    # Reduced for Railway's free tier
    tune.bufsize 16384

defaults
    log     global
    mode    tcp
    option  tcplog
    option  dontlognull
    timeout connect 5000ms
    timeout client  300000ms
    timeout server  300000ms
    retries 3

frontend minecraft_frontend
    bind *:25565
    mode tcp
    default_backend minecraft_backend

backend minecraft_backend
    mode tcp
    balance roundrobin
    option tcp-check
    # BORE_ADDRESS will be replaced by Railway environment variable
    # Format: bore.pub:54321
    server-template minecraft 1 ${BORE_ADDRESS} check inter 10s fall 3 rise 2
